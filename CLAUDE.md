# 行政文書RAGシステム構築 - Dify + Ollama

## 目標
A4 700ページ×十数個の行政文書に対するRAGベースの質問応答システムを、DifyとOllamaを使って構築する。

## 環境
- GPU: A6000 Ada (利用可能)
- 予算: 最小限（Ollamaローカル実行でコスト削減）

## タスク1: Difyセットアップ

### 1.1 Dify環境構築
- Difyをローカルでセルフホスト方式でセットアップ
- Docker Composeを使用した構築を推奨
- 必要な依存関係とポート設定を含める
- 日本語環境での動作確認

### 1.2 初期設定
- 管理画面へのアクセス設定
- 基本的なワークスペース作成
- セキュリティ設定の確認

## タスク2: Ollama統合

### 2.1 Ollama環境構築
- A6000 Adaを活用するOllamaインストール
- GPU認識とメモリ設定の最適化
- 日本語対応の適切なモデル選択と導入
  - LLM: japanese-stablelm-instruct、calm2、elyza等から選択
  - Embedding: multilingual-e5-large等の多言語モデル

### 2.2 Dify-Ollama連携設定
- DifyでOllamaをLLMプロバイダーとして追加
- APIエンドポイント設定 (通常 http://localhost:11434)
- モデル設定とパラメータ調整
- 接続テストと動作確認

## タスク3: RAGシステム基本構築

### 3.1 Knowledge Base作成
- Dify上でKnowledge Base新規作成
- 文書処理設定（チャンクサイズ、オーバーラップ等）
- Embedding設定の最適化

### 3.2 テスト用文書での動作確認
- 小規模なPDFでの動作テスト
- チャンク分割とベクトル化の確認
- 検索精度の初期評価

## タスク4: アプリケーション作成
- Dify上でChatbotアプリケーション作成
- Knowledge Baseとの連携設定
- プロンプトテンプレートの日本語最適化
- ソース情報表示の設定

## 成果物
1. 動作するDify + Ollamaローカル環境
2. テスト用文書での質問応答デモ
3. セットアップ手順書
4. 今後の大量文書投入に向けた最適化指針

## 注意事項
- GPU利用率の監視
- メモリ使用量の最適化
- 日本語文書処理の精度確認
- レスポンス速度の測定

この指示に従って、段階的に構築を進めてください。各ステップでの問題や最適化ポイントがあれば報告してください。
